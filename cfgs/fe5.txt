#!/usr/bin/python

"""config.txt: Configuration file. Contains the parameter needed.
"""
__author__      = 'Kuan-yin Chen'
__copyright__   = 'Copyright 2014, NYU-Poly'


# ---------------------------------------
# Frequently Used
# ---------------------------------------
EXP_NAME    = 'fe5'
DIR_TOPO    = './topologies/geant'
LOG_DIR     = './logs/fe5'
SIM_TIME    = 15.0

DO_REROUTE  = 0              # Do elephant flow rerouting (please refer to paper draft)

ROUTING_MODE = 'tablelb'        # Supported routing modes:
                                # 'tablelb': Table load-balancing routing using k-path
                                #               (default to Yen's k-path algorithm)
                                # 'ecmp': Equal-cost multi-path
                                # 'spf': Shortest-path first
K_PATH = 5                      # Number of predefined path per src-dst pair
K_PATH_METHOD = 'yen'           # The algorithm used to set up k-path database

# ---------------------------------------
# Switch/link Initialization Parameters
# ---------------------------------------
OVERRIDE_TABLESIZE = True
TABLESIZE_PER_SW = 500
OVERRIDE_N_HOSTS = True
N_HOSTS_PER_SW = 10
OVERRIDE_CAP = True
CAP_PER_LINK = 1e9


# ----------------------------------------
# Screen Printing Options
# ----------------------------------------
SHOW_PROGRESS = 0
SHOW_EVENTS = 0
SHOW_REJECTS = 0
SHOW_K_PATH_CONSTRUCTION = 0
SHOW_LINK_CONGESTION = 0
SHOW_TABLE_OVERFLOW = 0
SHOW_FLOW_CALC = 0
SHOW_REROUTE = 0
SHOW_SUMMARY = 1

# ----------------------------------------
# Logging Options
# ----------------------------------------
LOG_CONFIG = 1
LOG_LINK_UTIL = 1
LOG_TABLE_UTIL = 1
LOG_FLOW_STATS = 1
LOG_SUMMARY = 1
AVG_IGNORE_RECORDS = 100        # Ignore first ? columns when doing average



# ----------------------------------------
# Time-related Parameters
# ----------------------------------------
PERIOD_LOGGING = 0.100          # Period of doing link util and table util logging.

SW_CTRL_DELAY = 0.005           # Switch-to-controller delay
CTRL_SW_DELAY = 0.005           # Controller-to-switch delay
IDLE_TIMEOUT = 1.000            # Idle timeout
REJECT_TIMEOUT = 0.100          # Timeout for flow re-request if rejected due to overflow

PERIOD_REROUTE = 1.000          # Period of rerouting

# ----------------------------------------
# Flow Generation Parameters
# ----------------------------------------
FLOWGEN_SRCDST_MODEL        = 'uniform'     # Model for flow source and destination
                                        # "uniform": Randomly pick one dst host that is not
                                        #   within source host's LAN.

FLOWGEN_SIZERATE_MODEL      = 'bimodal'     # Model for flow size and rate
                                        # "uniform": Size and rate are generated in uniform
                                        #   random manner.
                                        # "bimodal": First decide whether a new flow is
                                        #   large or small, then decide its size and rate
                                        #   accordingly.

FLOWGEN_ARR_MODEL           = 'const'    # Flow arrival model
                                        # "saturate": Each host will be the source of
                                        #   one and exactly one active flow. A new flow is
                                        #   fired after the previous one comes to an end.
                                        # "const": Flow arrival rate is a specified constant.
                                        # "exp": Flow inter-arrival time is exponentially distributed

# Model parameters
class FLOWGEN_SIZERATE_UNIFORM:
    FLOW_SIZE_LO = 5e7
    FLOW_SIZE_HI = 10e7
    FLOW_RATE_LO = 5e6
    FLOW_RATE_HI = 10e6

class FLOWGEN_SIZERATE_BIMODAL:
    PROB_LARGE_FLOW = 0.1
    FLOW_SIZE_LARGE_LO = 5e8
    FLOW_SIZE_LARGE_HI = 10e8
    FLOW_RATE_LARGE_LO = 1e9
    FLOW_RATE_LARGE_HI = 1e9
    FLOW_SIZE_SMALL_LO = 5e6
    FLOW_SIZE_SMALL_HI = 10e6
    FLOW_RATE_SMALL_LO = 1e8
    FLOW_RATE_SMALL_HI = 1e8

class FLOWGEN_ARR_SATURATE:
    INIT_FLOWS_SPREAD = 1.0
    NEXT_FLOW_DELAY = 0.1

class FLOWGEN_ARR_CONST:
    FLOW_ARR_RATE = 200.0       # flows/sec
    CUTOFF = 0.1                # ratio to avg. inter-arrival time
                                # The inter-arrival time will be uniform randomly chosen
                                # in the interval of [AVG-CUTOFF*AVG, AVG+CUTOFF*AVG]

class FLOWGEN_ARR_EXP:
    FLOW_ARR_RATE = 200.0       # flows/sec, a.k.a. lambda
